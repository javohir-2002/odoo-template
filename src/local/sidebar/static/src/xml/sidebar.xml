<?xml version="1.0" encoding="utf-8"?>
<templates xml:space="preserve">
    <t t-name="sidebar.SidebarControllerListView" owl="1">
        <div class="bg-white o_sidebar_view sidebar" id="sidebar">
            <div class="" t-att-class="!state.sidebarCollapse ? 'o_container' : 'o_container_collapse'">
                <img src="/sidebar/static/description/logo.svg" class="sidebar-title" t-att-class="!state.sidebarCollapse ? 'd-block' : 'd-none'" alt="logo" style="width: 72px; height: 32px"></img>
                <i class="sidebar-toggle icons" t-on-click.prevent="toggleSidebar" t-att-class="!state.sidebarCollapse ?  'fa-solid fa-angles-left' : ' fa-solid fa-angles-right'"></i>
            </div>
            <div class="sidebar_menu-container">
                <t t-foreach="state.menuItems" t-as="menuitem" t-key="menuitem.name">
                    <t t-set="key" t-value="'parent-' + menuitem.name"/>
                    <t t-if="menuitem.children">
                        <div class="menu-item" t-att-class="!state.sidebarCollapse ? '' : 'sidebar'">
                            <div class="menu-link"  t-att-class="state.sectionVisibility[key] ? 'visible' : 'hidden'">
                                <div class="menu-link-content" t-att-class="state.sectionVisibility[key] ? 'visible' : 'hidden'">
                                    <t t-if="menuitem.icon">
                                        <img t-att-src="menuitem.icon" class="menu_icon"></img>
                                    </t>
                                </div>
                                <div class="d-flex span_container" t-on-click.prevent="() => this.toggleSectionVisibility(key)" t-att-class="state.sectionVisibility[key] ? 'visible' : 'hidden'">
                                    <span t-att-class="!state.sidebarCollapse ? '' : 'd-none'"> <t t-esc="menuitem.name"/></span>
                                    <span t-att-class="!state.sidebarCollapse ? '' : 'd-none'"><i class="fa fa-angle-down up-down-icon" t-att-class="state.sectionVisibility[key] ? 'fa fa-angle-up' : 'fa fa-angle-down'"></i></span>
                                </div>
                            </div>
                            <div class="submenu" t-att-class="state.sectionVisibility[key] ? 'visible' : 'hidden'">
                                <t t-foreach="menuitem.children" t-as="models" t-key="models.name">
                                    <t t-set="childKey" t-value="key + '-' + models.name"/>
                                    <t t-if="models.children">
                                        <div class="submenu-item" >
                                            <div class="submenu_item_container" t-att-class="state.sectionVisibility[childKey] ? 'visible' : 'hidden'" t-on-click.prevent="() => this.toggleSectionVisibility(childKey)">
                                                <div class="menu-link-content">
                                                    <t t-esc="models.name"/>
                                                </div>
                                                <i class="fa fa-angle-down up-down-icon" t-att-class="state.sectionVisibility[childKey] ? 'fa fa-angle-up' : 'fa fa-angle-down'"></i>
                                            </div>
                                            <div class="submenu" t-att-class="state.sectionVisibility[childKey] ? 'visible' : 'd-none'">
                                                <t t-foreach="models.children" t-as="modelsItem" t-key="modelsItem.name">
                                                    <div class="submenu-subitem" t-on-click.prevent="() => this.onMenuItemClick(modelsItem)">
                                                        <div class="" t-att-class="state.activeMenuItem === modelsItem.model ? 'active' : ''" >
                                                            <a href="#" class="" t-att-class="state.activeMenuItem === modelsItem.model ? 'active' : ''">
                                                                <i class="fa-solid fa-minus"></i>
                                                                <t t-esc="modelsItem.name"/>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </t>
                                            </div>
                                        </div>
                                    </t>
                                    <t t-elif="models.model">
                                        <div class="submenu-item">
                                            <div class="" t-att-class="state.activeMenuItem === models.model ? 'active' : ''" t-on-click.prevent="() => this.onMenuItemClick(models)">
                                                <a href="#" t-att-class="state.activeMenuItem === models.model ? 'active' : ''" style="font-size: 14px !important">
                                                    <t t-esc="models.name"/>
                                                </a>
                                            </div>
                                        </div>
                                    </t>
                                </t>
                            </div>
                        </div>
                    </t>
                    <t t-elif="menuitem.model">
                        <div class="menu-item" t-att-class="!state.sidebarCollapse ? '' : 'sidebar'">
                            <div class="menu-link" t-att-class="state.activeMenuItem === menuitem.model ? 'active' : ''" t-on-click.prevent="() => this.onMenuItemClick(menuitem)">
                                <a href="#">
                                    <div class="menu-link-content">
                                        <t t-if="menuitem.icon">
                                            <img t-att-src="menuitem.icon" class="menu_icon"></img>
                                        </t>
                                       <span t-att-class="!state.sidebarCollapse ? '' : 'd-none'"> <t t-esc="menuitem.name"/></span>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </t>
                </t>
            </div>
        </div>
    </t>
</templates>
