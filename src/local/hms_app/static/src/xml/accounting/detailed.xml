<templates xml:space="preserve">
    <t t-name="hms_app.DetailedView">
        <div class="o_list_renderer o_renderer table-responsive" tabindex="-1" t-ref="root">
            <div class="accounting-header p-3">
                <p>Booking Reconciliation</p>
            </div>
            <div class="accounting-body w-100 p-3">
                <div class="details-data">
                    <div class="data-filter d-flex">
                        <div class="select-wrapper">
                            <label>Reporting period:</label>
                            <select class="dataf-select" t-on-change.prevent="(e) => this.filterNewData(e)">
                                <t t-foreach="this.state.allMonths" t-as="month" t-key="this.state.allMonths.indexOf(month)">
                                    <option t-att-selected="month === this.state.month ? 'selected' : ''" t-att-value="month">
                                        <t t-esc="month"/>
                                    </option>
                                </t>
                            </select>

                        </div>
                        <div class="select-wrapper">
                            <label>Bookings:</label>
                            <select class="dataf-select">
                                <option>All</option>
                                <option>Unprocessed</option>
                                <option>Processed</option>
                            </select>
                        </div>
                    </div>
                    <div class="data-containers">
                        <div class="data-wrapper">
                            <div class="data-wrapper-header">
                                <div class="icon-color bg-success"></div>
                                <div class="header-name">
                                    <h2>Bookings included in reconciliation</h2>
                                </div>
                            </div>
                            <div class="data-wrapper-body">
                                <div class="data-stats">
                                    <span class="total-count"><t t-esc="this.filterCount()"/></span>
                                    <span class="total-count-name">Bookings</span>
                                </div>
                                <div class="data-stats">
                                    <span class="total-count"><t t-esc="this.filterTotal()"/></span>
                                    <span class="total-count-name">Bookings total</span>
                                </div>
                            </div>
                        </div>
                        <div class="data-wrapper">
                            <div class="data-wrapper-header">
                                <div class="icon-color bg-danger"></div>
                                <div class="header-name">
                                    <h2>Bookings excluded in reconciliation</h2>
                                </div>
                            </div>
                            <div class="data-wrapper-body">
                                <div class="data-stats">
                                    <span class="total-count">0</span>
                                    <span class="total-count-name">Bookings</span>
                                </div>
                                <div class="data-stats">
                                    <span class="total-count">0 UZS</span>
                                    <span class="total-count-name">Bookings total</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="accounting-body w-100 p-3">
                <div class="details-data">
                    <div class="details-body-data justify-content-between">
                        <div class="date-picker-group d-flex">
                            <div class="date-picker mx-2">
                                <label for="from-date">Davr dan</label>
                                <input type="date" id="from-date" class="form-control" t-att-min="this.setMin()" t-att-max="this.setMax()" t-on-change.prevent="(e) => this.startSelected(e)"/>
                            </div>
                            <div class="date-picker mx-2">
                                <label for="to-date">Gacha</label>
                                <input type="date" id="to-date" class="form-control" t-att-min="this.setMin()" t-att-max="this.setMax()" t-att-readonly="this.state.untilField ? '' : '1'" t-on-change.prevent="(e) => filterDataByCalendar(e)"/>
                            </div>
                            <div class="reset-button mx-2">
                                <button type="button" class="reset" t-att-class="state.resetButton ? '' : 'disabled-btn'" t-on-click="resetFields">O'z xolatiga qaytarish</button>
                            </div>
                        </div>
                        <div class="export-button">
                            <button type="button" class="xlsx-button">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <path d="M11.666 2.5V5.83333C11.666 6.05435 11.7538 6.26631 11.9101 6.42259C12.0664 6.57887 12.2783 6.66667 12.4993 6.66667H15.8327M11.666 2.5H5.83268C5.39065 2.5 4.96673 2.67559 4.65417 2.98816C4.34161 3.30072 4.16602 3.72464 4.16602 4.16667V15.8333C4.16602 16.2754 4.34161 16.6993 4.65417 17.0118C4.96673 17.3244 5.39065 17.5 5.83268 17.5H14.166C14.608 17.5 15.032 17.3244 15.3445 17.0118C15.6571 16.6993 15.8327 16.2754 15.8327 15.8333V6.66667M11.666 2.5L15.8327 6.66667M9.99935 14.1667V9.16667M9.99935 14.1667L7.91602 12.0833M9.99935 14.1667L12.0827 12.0833" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                XLSX ga eksport qilish</button>
                        </div>
                    </div>
                    <t t-if="this.state.monthlyData?.length > 0">
                    <table>
                        <thead>
                            <tr>
                                <th>â„–</th>
                                <th>Status</th>
                                <th>Bron qilish raqami</th>
                                <th>Mehmonlar</th>
                                <th>Kelish vaqti</th>
                                <th>Ketish sanasi</th>
                                <th>Manba</th>
                                <th>Oldindan to'lov</th>
                                <th>Narx</th>
                            </tr>
                        </thead>
                        <tbody>
                                <t t-set="index" t-value="0"/>
                                <t t-foreach="this.state.monthlyData" t-as="record" t-key="record.id">
                                    <tr>
                                        <td><t t-esc="index + 1"/></td>
                                        <td><div class="icon-color bg-success"></div></td>
                                        <td><t t-esc="record.data.booking_number"/></td>
                                        <td><t t-esc="record.data.guest_id[1]"/></td>
                                        <td><t t-esc="this.recordDate(record.data.check_in_date.c)"/></td>
                                        <td><t t-esc="this.recordDate(record.data.check_out_date.c)"/></td>
                                        <td><t t-esc="record.data.point_of_sale ? record.data.point_of_sale : ' '"/></td>
                                        <td></td>
                                        <td><t t-esc="this.formatNumber(record.data.total)"/> UZS</td>
                                    </tr>
                                    <t t-set="index" t-value="index + 1"/>
                                </t>
                            </tbody>
                        </table>
                    </t>
                    <t t-else="">
                        <div class="reception-no-data">
                            <svg xmlns="http://www.w3.org/2000/svg" width="120" height="123" viewBox="0 0 120 123" fill="none">
                              <path d="M105.01 45.3346C107.122 45.3346 108.835 43.6208 108.835 41.5066C108.835 39.3924 107.122 37.6786 105.01 37.6786C102.898 37.6786 101.186 39.3924 101.186 41.5066C101.186 43.6208 102.898 45.3346 105.01 45.3346Z" fill="#EAEEF9"/>
                              <path d="M3.41657 66.0358C4.80621 66.0358 5.93274 64.9082 5.93274 63.5173C5.93274 62.1264 4.80621 60.9989 3.41657 60.9989C2.02692 60.9989 0.900391 62.1264 0.900391 63.5173C0.900391 64.9082 2.02692 66.0358 3.41657 66.0358Z" fill="#EAEEF9"/>
                              <path d="M14.983 111.312C16.3726 111.312 17.4991 110.185 17.4991 108.794C17.4991 107.403 16.3726 106.276 14.983 106.276C13.5933 106.276 12.4668 107.403 12.4668 108.794C12.4668 110.185 13.5933 111.312 14.983 111.312Z" fill="#EAEEF9"/>
                              <path d="M28.4326 111.312L63.7416 100.249V54.8868L28.4326 65.8656V111.312Z" fill="#B7BFCD"/>
                              <path opacity="0.4" d="M99.0507 111.312L63.7417 100.249V54.8868L99.0507 65.8656V111.312Z" fill="#6D7C9A"/>
                              <g opacity="0.13">
                                <path d="M28.4326 111.312L63.7416 100.249V54.8868L28.4326 65.8656V111.312Z" fill="url(#paint0_linear_487_614)"/>
                                <path d="M99.0506 111.312L63.7416 100.249V54.8868L99.0506 65.8656V111.312Z" fill="url(#paint1_linear_487_614)"/>
                              </g>
                              <path d="M63.7416 122.461L28.4326 111.397V66.0358L63.7416 77.0996V122.461Z" fill="#EDF1F9"/>
                              <path d="M63.7417 122.461L99.0507 111.397V66.0358L63.7417 77.0996V122.461Z" fill="#DAE1ED"/>
                              <path opacity="0.09" d="M55.7416 114.461L28.4326 111.397V66.0358L63.7416 77.0996L55.7416 114.461Z" fill="url(#paint2_linear_487_614)"/>
                              <path opacity="0.2" d="M71.7417 106.461L99.0507 111.397V66.0358L63.7417 77.0996L71.7417 106.461Z" fill="url(#paint3_linear_487_614)"/>
                              <path d="M63.7417 54.8868L47.1406 42.4613L11.2417 54.5464L28.4327 65.8656L63.7417 54.8868Z" fill="#DAE1ED"/>
                              <path d="M63.7417 54.8868L80.3428 42.4613L116.242 54.5464L99.0507 65.8656L63.7417 54.8868Z" fill="#DAE1ED"/>
                              <path d="M28.4327 66.0358L63.7417 77.0996L46.1293 88.3336L11.2417 76.7592L28.4327 66.0358Z" fill="#EFF4FD"/>
                              <path d="M99.0507 66.0358L63.7417 77.0996L81.3541 88.3336L116.242 76.7592L99.0507 66.0358Z" fill="#EDF1F9"/>
                              <path d="M73.5932 11.3381C78.5397 24.7625 80.0142 27.7454 80.4981 40.9733C80.312 43.9927 80.1966 47.2761 78.773 49.92C76.8719 53.9645 72.2219 56.7654 67.8285 56.8108C63.3026 56.8917 58.8655 54.1205 56.8684 49.8474C55.4633 47.2541 55.508 43.7069 57.4354 41.3523C59.5307 39.0941 63.2169 38.5311 65.8686 39.9421C68.7855 41.282 70.5265 44.0682 71.1714 47.0065C71.8162 49.9449 71.5329 53.1318 70.7457 56.0295C69.0995 63.0769 67.736 63.4179 63.6987 75.3496" stroke="#ABB5CC" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="4 4"/>
                              <path d="M79.6136 4.23251C79.6021 6.20649 77.7651 7.41518 75.4356 6.78489C72.9829 6.36678 71.2469 5.93586 71.1352 4.17406C71.1914 2.36726 73.1627 1.66011 75.4701 0.862967C78.2366 -0.236354 79.4571 2.30354 79.6136 4.23251Z" fill="#DAE2EB"/>
                              <path d="M63.7646 10.2689C65.0076 11.5485 67.6283 11.9216 68.9054 9.96704C70.3058 7.80026 71.5044 6.22502 70.2166 4.7782C68.9736 3.49857 67.7638 4.36009 64.9973 5.45941C62.7795 6.59092 62.3088 8.86706 63.7646 10.2689Z" fill="#DAE2EB"/>
                              <path d="M69.5002 2.10355C70.6315 1.62139 71.9867 1.97513 72.5914 2.88821C72.8489 3.17757 73.1512 3.63412 73.2408 3.96848C74.2037 6.21901 73.9009 8.45016 72.6017 8.97732C71.1792 9.71666 69.2193 8.44983 68.4692 6.32149C68.2901 5.65277 68.2006 5.31841 68.0662 4.81687C67.9208 3.60161 68.369 2.58572 69.5002 2.10355C69.6682 2.05856 69.5002 2.10355 69.5002 2.10355Z" fill="#989FB0"/>
                              <path d="M17.499 38.3315H15.3089V36.1415H13.4317V38.3315H11.2417V40.2713H13.4317V42.4613H15.3089V40.2713H17.499V38.3315Z" fill="url(#paint4_linear_487_614)"/>
                              <path d="M22.3098 93.2787H20.1197V91.0886H18.2425V93.2787H16.0525V95.2184H18.2425V97.4085H20.1197V95.2184H22.3098V93.2787Z" fill="url(#paint5_linear_487_614)"/>
                              <path d="M118.048 93.4027L115.368 92.0498L116.721 89.3703L114.424 88.2107L113.071 90.8902L110.392 89.5373L109.194 91.9107L111.873 93.2635L110.52 95.9431L112.817 97.1027L114.17 94.4231L116.849 95.776L118.048 93.4027Z" fill="url(#paint6_linear_487_614)"/>
                              <defs>
                                <linearGradient id="paint0_linear_487_614" x1="52.5954" y1="58.1722" x2="47.7793" y2="78.222" gradientUnits="userSpaceOnUse">
                                  <stop offset="0.00289017" stop-color="#606673" stop-opacity="0"/>
                                  <stop offset="1" stop-color="#373C47"/>
                                </linearGradient>
                                <linearGradient id="paint1_linear_487_614" x1="52.5954" y1="58.1722" x2="47.7793" y2="78.222" gradientUnits="userSpaceOnUse">
                                  <stop offset="0.00289017" stop-color="#606673" stop-opacity="0"/>
                                  <stop offset="1" stop-color="#373C47"/>
                                </linearGradient>
                                <linearGradient id="paint2_linear_487_614" x1="36.3487" y1="97.0811" x2="44.8313" y2="73.1229" gradientUnits="userSpaceOnUse">
                                  <stop offset="0.00289017" stop-color="#6C80AA" stop-opacity="0"/>
                                  <stop offset="1" stop-color="#5D6A86"/>
                                </linearGradient>
                                <linearGradient id="paint3_linear_487_614" x1="82.7975" y1="103.625" x2="83.4646" y2="73.2229" gradientUnits="userSpaceOnUse">
                                  <stop offset="0.00289017" stop-color="#314F91" stop-opacity="0"/>
                                  <stop offset="1" stop-color="#324264"/>
                                </linearGradient>
                                <linearGradient id="paint4_linear_487_614" x1="14.3708" y1="36.361" x2="14.3708" y2="39.9083" gradientUnits="userSpaceOnUse">
                                  <stop stop-color="#B0BACC"/>
                                  <stop offset="1" stop-color="#969EAE"/>
                                </linearGradient>
                                <linearGradient id="paint5_linear_487_614" x1="19.1816" y1="91.3082" x2="19.1816" y2="94.8554" gradientUnits="userSpaceOnUse">
                                  <stop stop-color="#B0BACC"/>
                                  <stop offset="1" stop-color="#969EAE"/>
                                </linearGradient>
                                <linearGradient id="paint6_linear_487_614" x1="115.438" y1="89.0594" x2="113.246" y2="93.3995" gradientUnits="userSpaceOnUse">
                                  <stop stop-color="#B0BACC"/>
                                  <stop offset="1" stop-color="#969EAE"/>
                                </linearGradient>
                              </defs>
                            </svg>
                            <p>There is no information in the list for selected period</p>
                            <h5>Information will appear here if it is have</h5>
                          </div>
                    </t>
                </div>
            </div>













            <table t-attf-class="o_list_table d-none table table-sm table-hover position-relative mb-0 {{props.list.isGrouped ? 'o_list_table_grouped' : 'o_list_table_ungrouped table-striped'}}" t-ref="table">
                <thead class="d-none">
                    <tr class="d-none">
                        <th t-if="hasSelectors" class="o_list_record_selector o_list_controller align-middle pe-1 cursor-pointer" tabindex="-1" t-on-keydown="(ev) => this.onCellKeydown(ev)" t-on-click.stop="toggleSelection">
                            <CheckBox disabled="!_canSelectRecord" value="selectAll" className="'d-flex m-0'" onChange.bind="toggleSelection"/>
                        </th>
                        <t t-foreach="state.columns" t-as="column" t-key="column.id">
                            <th t-if="column.type === 'field'"
                                t-att-data-name="column.name"
                                t-att-class="getColumnClass(column) + ' opacity-trigger-hover'"
                                t-on-pointerup="onColumnTitleMouseUp"
                                t-on-click="() => this.onClickSortColumn(column)"
                                t-on-keydown="(ev) => this.onCellKeydown(ev)"
                                t-att-data-tooltip-template="isDebugMode ? 'web.FieldTooltip' : false"
                                t-att-data-tooltip-info="isDebugMode ? makeTooltip(column) : false"
                                data-tooltip-delay="1000"
                                tabindex="-1"
                                class="d-none">
                                <t t-if="column.hasLabel and column.widget !== 'handle'">
                                <t t-set="isNumeric" t-value="isNumericColumn(column)"/>
                                    <div t-att-class="{'d-flex': true, 'flex-row-reverse': shouldReverseHeader(column)}" class="d-none">
                                        <span class="d-block min-w-0 text-truncate flex-grow-1" t-att-class="isNumeric ? 'o_list_number_th' : ''"
                                              t-esc="column.label"/>
                                        <i t-att-class="getSortableIconClass(column)"/>
                                    </div>
                                    <span
                                          class="o_resize position-absolute top-0 end-0 bottom-0 ps-1 bg-black-25 opacity-0 opacity-50-hover z-index-1"
                                          t-on-pointerdown.stop.prevent="onStartResize"/>
                                </t>
                            </th>
                            <th t-else="" t-on-keydown="(ev) => this.onCellKeydown(ev)" t-att-class="{o_list_button: column.type === 'button_group'}"/>
                        </t>
                        <th  t-if="props.onOpenFormView" t-on-keydown="(ev) => this.onCellKeydown(ev)" class="o_list_open_form_view"/>
                        <th t-if="displayOptionalFields or activeActions.onDelete" t-on-keydown="(ev) => this.onCellKeydown(ev)" class="o_list_controller o_list_actions_header position-sticky end-0">
                            <Dropdown t-if="displayOptionalFields"
                                class="'o_optional_columns_dropdown text-center border-top-0'"
                                togglerClass="'btn p-0'"
                                skipTogglerTabbing="true"
                                listRendererClass="uniqueRendererClass"
                                position="'bottom-end'">
                                <t t-set-slot="toggler">
                                    <i class="o_optional_columns_dropdown_toggle oi oi-fw oi-settings-adjust"/>
                                </t>

                                <t t-foreach="optionalFieldGroups" t-as="group" t-key="group_index">
                                    <div t-if="!group_first" role="separator" class="dropdown-divider"/>
                                    <DropdownItem t-if="group.displayName" parentClosingMode="'none'" onSelected="() => this.toggleOptionalFieldGroup(group.id)">
                                        <div class="fw-bold" t-esc="group.displayName"/>
                                    </DropdownItem>
                                    <t t-foreach="group.optionalFields" t-as="field" t-key="field_index">
                                        <DropdownItem parentClosingMode="'none'" onSelected="() => this.toggleOptionalField(field.name)">
                                            <CheckBox
                                                onChange="() => this.toggleOptionalField(field.name)"
                                                value="field.value"
                                                name="field.name"
                                            >
                                                <span class="d-flex align-items-center"><span class="text-truncate" t-esc="field.label"/><span class="ps-1" t-if="env.debug" t-esc="' (' + field.name + ')'" /></span>
                                            </CheckBox>
                                        </DropdownItem>
                                    </t>
                                </t>
                            </Dropdown>
                        </th>
                    </tr>
                </thead>
                <tbody class="ui-sortable">
                    <t t-call="{{ constructor.rowsTemplate }}">
                        <t t-set="list" t-value="props.list"/>
                    </t>
                </tbody>
                <tfoot t-on-click="() => props.list.leaveEditMode()" class="o_list_footer cursor-default" t-att-class="{o_sample_data_disabled: props.list.model.useSampleModel}">
                    <tr>
                        <td t-if="hasSelectors"/>
                        <t t-foreach="state.columns" t-as="column" t-key="column.id">
                            <t t-set="aggregate" t-value="aggregates[column.name]"/>
                            <td t-if="aggregate" class="o_list_number" >
                                <span t-esc="aggregate.value" t-att-data-tooltip="aggregate.help"/>
                            </td>
                            <td t-else=""/>
                        </t>
                        <td t-if="props.onOpenFormView"/>
                        <td t-if="displayOptionalFields or activeActions.onDelete" />
                    </tr>
                </tfoot>
            </table>
        </div>
    </t>
</templates>
